<div class="mx-auto mt-5 shadow-lg job-container rounded-4 w-50">
    <div class="card job-card">
        <div class="card-header">
            Actively Hiring
        </div>
        <div class="card-body">
            <h5 class="card-title">
                <b>
                    <%= job.jobDesignation %>
                </b>
                <% if(isLoggedIn){ %>
                    <a href="/jobs/update-job/<%= job.id %>"><i class="fa-solid fa-pen-to-square"
                            style="font-size: 0.9rem; color: grey;"></i></a>
                    <button type="button" class="p-0 btn" onclick="deleteJob(<%= job.id %>)"><i class="fa-solid fa-trash"
                            style="font-size: 0.9rem; color: rgb(226, 0, 0);"></i></button>
                    <% } %>
            </h5>
            <p class="card-text">
                <i class="fa-solid fa-building" style="font-size: 0.9rem; margin-right: 5px; color: grey;"></i> <strong>
                    <%= job.companyName %>
                </strong> <br>
                <i class="fa-solid fa-location-dot" style="font-size: 0.9rem; margin-right: 5px; color: grey;"></i>
                <%= job.jobLocation %> <br>
                    <i class="fa-solid fa-indian-rupee-sign" style="font-size: 0.9rem; margin-right: 5px; color: grey;"></i>
                    <%= job.salary %> <br>
                        <i class="fa-solid fa-users" style="font-size: 0.9rem; margin-right: 5px; color: grey;"></i>
                        <%= job.numberOfOpenings %> <br>
                            <i class="fa-regular fa-calendar" style="font-size: 0.9rem; margin-right: 5px; color: grey;"></i> Posted on
                            <%= job.jobPosted %>
                                <br>
                                Number Of Applicants : <%= job.numberOfOpenings %>
            </p>
            <p class="class-text">
            <h6>Job Overview-</h6>
            <%= job.jobOverView %>
                </p>

                <div class="p-0 card-body d-flex flex-column">
                    <h6>Required Skills-</h6>
                    <div class="flex-wrap d-flex">
                        <% const skills=job.skillSet.split(','); %>
                            <% skills.forEach(skill=> { %>
                                <span><a class="px-2 py-0 mt-2 btn btn-outline-primary me-1" href="#">
                                        <%= skill %>
                                    </a></span>
                                <% }) %>
                    </div>
                </div>
                <% if (isLoggedIn) { %>
                    <button type="button" class="mt-3 btn btn-primary w-25" data-bs-toggle="modal" data-bs-target="#jobApplication">
                        Apply
                    </button>

                    <!-- Modal -->
                    <div class="modal fade" id="jobApplication" tabindex="-1" aria-labelledby="jobApplicationLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h1 class="modal-title fs-5" id="jobApplicationLabel">Apply in less than one minute.
                                    </h1>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        <!-- to apply for a job -->
                                        <form action="/job-details/<%= job.id %>" class="register-form" method="post">
                                            <div class="mb-3">
                                                <label for="name" class="form-label">Full Name</label>
                                                <input type="name" class="form-control" id="name" name="name">
                                            </div>
                                            <div class="mb-3">
                                                <label for="email" class="form-label">Email address</label>
                                            <input type="email" class="form-control" id="email" aria-describedby="emailHelp" name="email">
                                            </div>
                                            <div class="mb-3">
                                                <label for="mobile" class="form-label">Mobile No.</label>
                                                <input type="number" class="form-control" id="mobile" name="mobile">
                                            </div>
                                            <div class="mb-3">
                                                <label for="document" class="form-label">Resume</label>
                                                <input type="file" class="form-control" id="document" name="document">
                                            </div>
                                            </form>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                                <button type="submit" class="btn btn-primary">Apply</button>
                                            </div>
                                            </div>
                                            </div>
                                            </div>
                    <% } else { %>
                        <!-- Redirect to register page -->
                        <button class="mt-3 btn btn-primary w-25"
                            <button class="mt-3 btn btn-primary w-25" onclick="window.location.href = '/register'">Apply</button>
                        <% } %>
        </div>
    </div>
</div>